<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#2563eb" />
  <title>math โ ูุญุฑุฑ ูุญุชูู ุงูุจุทุงูุฉ</title>

  <link rel="stylesheet" href="/assets/css/base.css" />
  <link rel="stylesheet" href="/assets/css/lesson.css" />
  <link rel="stylesheet" href="/assets/css/questions.css" />
  <link rel="stylesheet" href="/assets/css/toast.css" />
  <link rel="stylesheet" href="/assets/css/mng/manager.css" />
  <link rel="stylesheet" href="/assets/css/mng/card-editor.css" />
  <link rel="stylesheet" href="/assets/vendor/katex/katex.min.css" />
  <link rel="stylesheet" href="/assets/vendor/mathlive/mathlive.css" />
  <link rel="stylesheet" href="/assets/css/mathx.css" />
  <link rel="stylesheet" href="/assets/css/md-tokens.css" />
  <link rel="stylesheet" href="/assets/css/md-base.css" />
  <link rel="stylesheet" href="/assets/css/md-components.css" />
  <link rel="stylesheet" href="/assets/css/md-utilities.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cropperjs@1.6.2/dist/cropper.min.css" />
  <script src="/assets/js/mng/ain-guard.js" defer></script>
</head>

<body class="md-theme">
  <div class="page-shell">
    <header class="editor-header">
      <div class="container header-inner">
        <div class="header-main">
          <a id="btnBack" class="btn btn-ghost btn-sm md-btn" href="/mng/cards.html">ุฑุฌูุน ููุจุทุงูุงุช</a>
          <h1 class="editor-title" id="cardTitle">ุจุทุงูุฉ ุฑูู โ</h1>
          <p class="editor-subtitle" id="cardSubtitle">ุชุญููู ุงูุจูุงูุงุช...</p>
        </div>
        <div class="header-actions">
          <label class="preview-toggle" for="previewToggle">
            <span>๐ ูุนุงููุฉ ุงูุทุงูุจ</span>
            <input id="previewToggle" type="checkbox" class="md-checkbox" />
            <span class="toggle-track" aria-hidden="true"></span>
          </label>
          <span id="ainUserLabel" class="badge primary md-badge">ูุญูู</span>
          <button id="ainLogoutBtn" class="btn btn-ghost btn-sm md-btn" type="button">ุชุณุฌูู ุฎุฑูุฌ</button>
          <div id="saveStatus" class="save-status">ุชู ุงูุญูุธ</div>
          <button id="btnSave" class="btn btn-primary md-btn">ุญูุธ ุงูุขู</button>
        </div>
      </div>
    </header>

    <main class="container editor-layout">
      <section id="builderEdit" class="editor-panel"></section>

      <section id="builderPreview" class="preview-panel hidden" aria-hidden="true">
        <div class="preview-shell">
          <section class="lesson-header preview-header">
            <div class="lesson-title">
              <h1 id="lessonTitle" class="h1">ูุนุงููุฉ ุงูุจุทุงูุฉ</h1>
              <div class="lesson-meta">
                <span id="lessonStudent" class="lesson-student">ุทุงูุจ ุชุฌุฑูุจู</span>
                <span id="lessonWeek" class="badge primary md-badge">week</span>
              </div>
            </div>
            <div class="progress-wrap">
              <div class="progress-label">
                <span>ูุณุชูู ุงูููู</span>
                <span id="progressPercent">0%</span>
              </div>
              <div class="progress">
                <i id="progressBar"></i>
              </div>
            </div>
          </section>

          <section id="lessonContent" class="stack" aria-live="polite"></section>

          <section id="lessonComplete" class="lesson-complete hidden" hidden>
            <div class="card md-card">
              <div class="card-header">
                <div>
                  <h2 class="h2">ุฃุญุณูุช ๐</h2>
                  <p class="p">ุฃูููุช ุงูุจุทุงูุฉ ุจูุฌุงุญ.</p>
                </div>
                <span class="badge done md-badge">ููุฌุฒุฉ</span>
              </div>
              <div class="card-body">
                <p class="p">ูุฐู ูุนุงููุฉ ููุท โ ูู ูุชู ุญูุธ ุฃู ุชูุฏูู.</p>
              </div>
            </div>
          </section>
        </div>
      </section>
    </main>
  </div>

  <div id="imageEditor" class="modal hidden md-modal" aria-hidden="true">
    <div class="modal-backdrop" data-close="true"></div>
    <div class="modal-card modal-card-lg image-editor md-modal-card" role="dialog" aria-modal="true" aria-labelledby="imageEditorTitle">
      <div class="modal-header">
        <h2 id="imageEditorTitle" class="h2">ุชุนุฏูู ุงูุตูุฑุฉ</h2>
        <button id="btnCloseImageEditor" class="btn btn-ghost btn-sm md-btn" type="button">ุฅุบูุงู</button>
      </div>
      <div class="modal-body image-editor-body">
        <div class="image-editor-stage">
          <img id="imageEditorPreview" alt="ูุนุงููุฉ ุงููุต" />
        </div>
        <div class="image-editor-tools">
          <div class="tool-group">
            <label class="label md-label">ูุณุจุฉ ุงููุต</label>
            <div class="tool-options">
              <button class="btn btn-ghost btn-sm md-btn" data-aspect="free" type="button">ุญุฑ</button>
              <button class="btn btn-ghost btn-sm md-btn" data-aspect="1" type="button">1:1</button>
              <button class="btn btn-ghost btn-sm md-btn" data-aspect="4/3" type="button">4:3</button>
              <button class="btn btn-ghost btn-sm md-btn" data-aspect="16/9" type="button">16:9</button>
            </div>
          </div>
          <div class="tool-group">
            <label class="label md-label">ุชุญูู</label>
            <div class="tool-options">
              <button class="btn btn-ghost btn-sm md-btn" data-action="zoom-in" type="button">ุชูุจูุฑ +</button>
              <button class="btn btn-ghost btn-sm md-btn" data-action="zoom-out" type="button">ุชุตุบูุฑ -</button>
              <button class="btn btn-ghost btn-sm md-btn" data-action="rotate-left" type="button">ุฏูุฑุงู โฒ</button>
              <button class="btn btn-ghost btn-sm md-btn" data-action="rotate-right" type="button">ุฏูุฑุงู โณ</button>
              <button class="btn btn-ghost btn-sm md-btn" data-action="flip" type="button">ููุจ ุฃููู</button>
              <button class="btn btn-ghost btn-sm md-btn" data-action="reset" type="button">ุฅุนุงุฏุฉ ุถุจุท</button>
            </div>
          </div>
          <div class="tool-group">
            <label class="label md-label">ุงูุฅุทุงุฑ</label>
            <div class="tool-options">
              <button class="btn btn-ghost btn-sm md-btn" data-frame="none" type="button">ุจุฏูู</button>
              <button class="btn btn-ghost btn-sm md-btn" data-frame="border" type="button">ุฅุทุงุฑ ุฃุจูุถ</button>
              <button class="btn btn-ghost btn-sm md-btn" data-frame="rounded" type="button">ุญูุงู ุฏุงุฆุฑูุฉ</button>
            </div>
          </div>
          <div class="image-editor-preview">
            <span class="label md-label">ุงููุนุงููุฉ</span>
            <div class="image-editor-thumb">
              <img id="imageEditorThumb" alt="ูุนุงููุฉ ูุตุบุฑุฉ" />
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer modal-actions">
        <button id="btnCancelImageEdit" class="btn btn-outline md-btn" type="button">ุฅูุบุงุก</button>
        <button id="btnApplyImageEdit" class="btn btn-primary md-btn" type="button">ุงุนุชูุงุฏ ุงูุชุนุฏูู</button>
      </div>
    </div>
  </div>

  <div id="mathEditor" class="modal hidden md-modal" aria-hidden="true">
    <div class="modal-backdrop" data-close="true"></div>
    <div class="modal-card modal-card-md math-editor md-modal-card" role="dialog" aria-modal="true" aria-labelledby="mathEditorTitle">
      <div class="modal-header">
        <h2 id="mathEditorTitle" class="h2">ุฅุฏุฑุงุฌ ุตูุบุฉ ุฑูุงุถูุฉ</h2>
        <button id="btnCloseMathEditor" class="btn btn-ghost btn-sm md-btn" type="button">ุฅุบูุงู</button>
      </div>
      <div class="modal-body">
        <div class="math-editor-tabs" role="tablist" aria-label="ุฃุฏูุงุช ุงูุฑูุงุถูุงุช">
          <button type="button" class="math-tab active" data-math-tab="frac">ูุณุฑ</button>
          <button type="button" class="math-tab" data-math-tab="table">ุฌุฏูู</button>
          <button type="button" class="math-tab" data-math-tab="sqrt">โ ุฌุฐุฑ ุชุฑุจูุนู</button>
          <button type="button" class="math-tab" data-math-tab="cbrt">โ ุฌุฐุฑ ุชูุนูุจู</button>
        </div>
        <div class="math-editor-panels">
          <div class="math-editor-panel active" data-math-panel="frac">
            <div class="field md-field">
              <label class="label md-label">ุงูุจุณุท</label>
              <input id="mathFracNumerator" class="input md-input" type="text" placeholder="ูุซุงู: ุณ + 1" />
            </div>
            <div class="field md-field">
              <label class="label md-label">ุงูููุงู</label>
              <input id="mathFracDenominator" class="input md-input" type="text" placeholder="ูุซุงู: 2ุณ" />
            </div>
          </div>
          <div class="math-editor-panel" data-math-panel="table">
            <div class="math-table-settings">
              <div class="field md-field">
                <label class="label md-label">ุนุฏุฏ ุงูุตููู</label>
                <input id="mathTableRows" class="input ltr md-input" type="number" min="1" value="2" />
              </div>
              <div class="field md-field">
                <label class="label md-label">ุนุฏุฏ ุงูุฃุนูุฏุฉ</label>
                <input id="mathTableCols" class="input ltr md-input" type="number" min="1" value="2" />
              </div>
            </div>
            <div id="mathTableGrid" class="math-table-grid" aria-label="ุฎูุงูุง ุงูุฌุฏูู"></div>
          </div>
          <div class="math-editor-panel" data-math-panel="sqrt">
            <div class="field md-field">
              <label class="label md-label">ุฏุงุฎู ุงูุฌุฐุฑ</label>
              <input id="mathRootExpr" class="input md-input" type="text" placeholder="ูุซุงู: ุณ^2 + 4" />
            </div>
          </div>
          <div class="math-editor-panel" data-math-panel="cbrt">
            <div class="field md-field">
              <label class="label md-label">ุฏุงุฎู ุงูุฌุฐุฑ ุงูุชูุนูุจู</label>
              <input id="mathCbrtExpr" class="input md-input" type="text" placeholder="ูุซุงู: ุณ^3 + 1" />
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer modal-actions">
        <button id="btnMathEditorCancel" class="btn btn-outline md-btn" type="button">ุฅูุบุงุก</button>
        <button id="btnMathEditorInsert" class="btn btn-primary md-btn" type="button">ุฅุฏุฑุงุฌ</button>
      </div>
    </div>
  </div>

  <div id="mathxEditor" class="modal hidden md-modal" aria-hidden="true">
    <div class="modal-backdrop" data-mathx-close="true"></div>
    <div class="modal-card modal-card-lg mathx-modal md-modal-card" role="dialog" aria-modal="true" aria-labelledby="mathxEditorTitle">
      <div class="modal-header">
        <h2 id="mathxEditorTitle" class="h2">ูุญุฑุฑ ุงููุนุงุฏูุงุช</h2>
        <button id="btnCloseMathxEditor" class="btn btn-ghost btn-sm md-btn" type="button">ุฅุบูุงู</button>
      </div>
      <div class="modal-body">
        <div class="mathx-toolbar" role="toolbar" aria-label="ุฃุฏูุงุช ุงููุนุงุฏูุงุช">
          <button type="button" class="btn btn-ghost btn-sm md-btn mathx-tool" data-mathx-insert="\\frac{#?}{#?}">ูุณุฑ</button>
          <button type="button" class="btn btn-ghost btn-sm md-btn mathx-tool" data-mathx-insert="\\sqrt{#?}">ุฌุฐุฑ</button>
          <button type="button" class="btn btn-ghost btn-sm md-btn mathx-tool" data-mathx-insert="^{#?}">ุฃุณ</button>
          <button type="button" class="btn btn-ghost btn-sm md-btn mathx-tool" data-mathx-insert="_{#?}">ูุคุดุฑ ุณููู</button>
          <button type="button" class="btn btn-ghost btn-sm md-btn mathx-tool" data-mathx-insert="\\left( #? \\right)">ุฃููุงุณ</button>
          <button type="button" class="btn btn-ghost btn-sm md-btn mathx-tool" data-mathx-insert="\\left| #? \\right|">ูููุฉ ูุทููุฉ</button>
          <button type="button" class="btn btn-ghost btn-sm md-btn mathx-tool" data-mathx-insert="=">=</button>
          <button type="button" class="btn btn-ghost btn-sm md-btn mathx-tool" data-mathx-insert="\\neq">โ</button>
          <button type="button" class="btn btn-ghost btn-sm md-btn mathx-tool" data-mathx-insert="\\leq">โค</button>
          <button type="button" class="btn btn-ghost btn-sm md-btn mathx-tool" data-mathx-insert="\\geq">โฅ</button>
          <button type="button" class="btn btn-ghost btn-sm md-btn mathx-tool" data-mathx-insert="\\approx">โ</button>
          <button type="button" class="btn btn-ghost btn-sm md-btn mathx-tool" data-mathx-insert="\\pi">ฯ</button>
          <button type="button" class="btn btn-ghost btn-sm md-btn mathx-tool" data-mathx-insert="\\theta">ฮธ</button>
          <button type="button" class="btn btn-ghost btn-sm md-btn mathx-tool" data-mathx-insert="\\sqrt{#?}">โ</button>
          <button type="button" class="btn btn-ghost btn-sm md-btn mathx-tool" data-mathx-insert="\\sum_{#?}^{#?}">โ</button>
          <button type="button" class="btn btn-ghost btn-sm md-btn mathx-tool" data-mathx-insert="\\int_{#?}^{#?}">โซ</button>
          <button type="button" class="btn btn-ghost btn-sm md-btn mathx-tool" data-mathx-command="backspace">ุญุฐู</button>
          <button type="button" class="btn btn-ghost btn-sm md-btn mathx-tool" data-mathx-command="clear">ูุณุญ ุงููู</button>
        </div>
        <div class="mathx-field-wrap">
          <math-field id="mathxField" class="mathx-field" dir="ltr"></math-field>
        </div>
        <div class="mathx-options">
          <label class="label md-label mathx-toggle" for="mathxArabicToggle">
            <input id="mathxArabicToggle" type="checkbox" class="md-checkbox" checked />
            <span>ุชุนุฑูุจ ุงููุนุงุฏูุฉ</span>
          </label>
        </div>
        <div class="mathx-preview" aria-live="polite">
          <div class="mathx-preview-label">ุงููุนุงููุฉ ุงูููุฑูุฉ</div>
          <div id="mathxPreviewBox" class="mathx-preview-box"></div>
          <div id="mathxPreviewError" class="mathx-preview-error" role="alert" hidden></div>
        </div>
      </div>
      <div class="modal-footer modal-actions">
        <button id="btnMathxCancel" class="btn btn-outline md-btn" type="button">ุฅูุบุงุก</button>
        <button id="btnMathxCopy" class="btn btn-ghost md-btn" type="button">ูุณุฎ LaTeX</button>
        <button id="btnMathxInsert" class="btn btn-primary md-btn" type="button">ุฅุฏุฑุงุฌ</button>
      </div>
    </div>
  </div>

  <div id="confirmLeave" class="modal hidden md-modal" aria-hidden="true">
    <div class="modal-backdrop" data-close="true"></div>
    <div class="modal-card modal-card-sm md-modal-card" role="dialog" aria-modal="true" aria-labelledby="confirmLeaveTitle">
      <div class="modal-header">
        <h2 id="confirmLeaveTitle" class="h2">ุชุบููุฑุงุช ุบูุฑ ูุญููุธุฉ</h2>
        <button id="btnCloseLeave" class="btn btn-ghost btn-sm md-btn" type="button">ุฅุบูุงู</button>
      </div>
      <div class="modal-body">
        <p class="p">ูุฏูู ุชุบููุฑุงุช ุบูุฑ ูุญููุธุฉ. ูู ุชุฑูุฏ ุงููุชุงุจุนุฉ ุจุฏูู ุญูุธุ</p>
      </div>
      <div class="modal-footer modal-actions">
        <button id="btnConfirmLeave" class="btn btn-primary md-btn" type="button">ูุชุงุจุนุฉ ุจุฏูู ุญูุธ</button>
        <button id="btnCancelLeave" class="btn btn-outline md-btn" type="button">ุฅูุบุงุก</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/cropperjs@1.6.2/dist/cropper.min.js"></script>
  <script src="/assets/vendor/katex/katex.min.js" defer></script>
  <script src="/assets/vendor/mathlive/mathlive.min.js" defer></script>
  <script>
    window.MathJax = window.MathJax || {};
    window.MathJax.Ajax = window.MathJax.Ajax || { config: { path: {} } };
    window.MathJax.Hub = window.MathJax.Hub || { Config: function () {}, Queue: function () {} };
    MathJax.Ajax.config.path['arabic'] = '/assets/vendor/arabic-mathjax';
    MathJax.Hub.Config({
      extensions: ['[arabic]/arabic.js'],
      jax: ['input/TeX', 'output/HTML-CSS'],
      TeX: {
        extensions: ['AMSmath.js', 'AMSsymbols.js']
      }
    });
  </script>
  <script src="/assets/vendor/mathjax2/MathJax.js?config=TeX-AMS_HTML"></script>
  <script type="module" src="/assets/js/mng/cardEditor.js"></script>
  <script type="module" src="/assets/js/mng/cardbuilder-mathx.js"></script>
</body>
</html>
