<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#2563eb" />
  <title>math โ ูุญุฑุฑ ูุญุชูู ุงูุจุทุงูุฉ</title>

  <link rel="stylesheet" href="/assets/css/base.css" />
  <link rel="stylesheet" href="/assets/css/lesson.css" />
  <link rel="stylesheet" href="/assets/css/questions.css" />
  <link rel="stylesheet" href="/assets/css/toast.css" />
  <link rel="stylesheet" href="/assets/css/mng/manager.css" />
  <link rel="stylesheet" href="/assets/css/mng/card-editor.css" />
  <link rel="stylesheet" href="/assets/css/md-tokens.css" />
  <link rel="stylesheet" href="/assets/css/md-base.css" />
  <link rel="stylesheet" href="/assets/css/md-components.css" />
  <link rel="stylesheet" href="/assets/css/md-utilities.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cropperjs@1.6.2/dist/cropper.min.css" />
  <script src="/assets/vendor/mathjax/tex-svg.js"></script>
  <script src="/assets/js/mng/ain-guard.js" defer></script>
</head>

<body class="md-theme">
  <div class="page-shell">
    <header class="editor-header">
      <div class="container header-inner">
        <div class="header-main">
          <a id="btnBack" class="btn btn-ghost btn-sm md-btn" href="/mng/cards.html">ุฑุฌูุน ููุจุทุงูุงุช</a>
          <h1 class="editor-title" id="cardTitle">ุจุทุงูุฉ ุฑูู โ</h1>
          <p class="editor-subtitle" id="cardSubtitle">ุชุญููู ุงูุจูุงูุงุช...</p>
        </div>
        <div class="header-actions">
          <label class="preview-toggle" for="previewToggle">
            <span>๐ ูุนุงููุฉ ุงูุทุงูุจ</span>
            <input id="previewToggle" type="checkbox" class="md-checkbox" />
            <span class="toggle-track" aria-hidden="true"></span>
          </label>
          <span id="ainUserLabel" class="badge primary md-badge">ูุญูู</span>
          <button id="ainLogoutBtn" class="btn btn-ghost btn-sm md-btn" type="button">ุชุณุฌูู ุฎุฑูุฌ</button>
          <div id="saveStatus" class="save-status">ุชู ุงูุญูุธ</div>
          <button id="btnSave" class="btn btn-primary md-btn">ุญูุธ ุงูุขู</button>
        </div>
      </div>
    </header>

    <main class="container editor-layout">
      <section id="builderEdit" class="editor-panel"></section>

      <section id="builderPreview" class="preview-panel hidden" aria-hidden="true">
        <div class="preview-shell">
          <section class="lesson-header preview-header">
            <div class="lesson-title">
              <h1 id="lessonTitle" class="h1">ูุนุงููุฉ ุงูุจุทุงูุฉ</h1>
              <div class="lesson-meta">
                <span id="lessonStudent" class="lesson-student">ุทุงูุจ ุชุฌุฑูุจู</span>
                <span id="lessonWeek" class="badge primary md-badge">week</span>
              </div>
            </div>
            <div class="progress-wrap">
              <div class="progress-label">
                <span>ูุณุชูู ุงูููู</span>
                <span id="progressPercent">0%</span>
              </div>
              <div class="progress">
                <i id="progressBar"></i>
              </div>
            </div>
          </section>

          <section id="lessonContent" class="stack" aria-live="polite"></section>

          <section id="lessonComplete" class="lesson-complete hidden" hidden>
            <div class="card md-card">
              <div class="card-header">
                <div>
                  <h2 class="h2">ุฃุญุณูุช ๐</h2>
                  <p class="p">ุฃูููุช ุงูุจุทุงูุฉ ุจูุฌุงุญ.</p>
                </div>
                <span class="badge done md-badge">ููุฌุฒุฉ</span>
              </div>
              <div class="card-body">
                <p class="p">ูุฐู ูุนุงููุฉ ููุท โ ูู ูุชู ุญูุธ ุฃู ุชูุฏูู.</p>
              </div>
            </div>
          </section>
        </div>
      </section>
    </main>
  </div>

  <div id="imageEditor" class="modal hidden md-modal" aria-hidden="true">
    <div class="modal-backdrop" data-close="true"></div>
    <div class="modal-card modal-card-lg image-editor md-modal-card" role="dialog" aria-modal="true" aria-labelledby="imageEditorTitle">
      <div class="modal-header">
        <h2 id="imageEditorTitle" class="h2">ุชุนุฏูู ุงูุตูุฑุฉ</h2>
        <button id="btnCloseImageEditor" class="btn btn-ghost btn-sm md-btn" type="button">ุฅุบูุงู</button>
      </div>
      <div class="modal-body image-editor-body">
        <div class="image-editor-stage">
          <img id="imageEditorPreview" alt="ูุนุงููุฉ ุงููุต" />
        </div>
        <div class="image-editor-tools">
          <div class="tool-group">
            <label class="label md-label">ูุณุจุฉ ุงููุต</label>
            <div class="tool-options">
              <button class="btn btn-ghost btn-sm md-btn" data-aspect="free" type="button">ุญุฑ</button>
              <button class="btn btn-ghost btn-sm md-btn" data-aspect="1" type="button">1:1</button>
              <button class="btn btn-ghost btn-sm md-btn" data-aspect="4/3" type="button">4:3</button>
              <button class="btn btn-ghost btn-sm md-btn" data-aspect="16/9" type="button">16:9</button>
            </div>
          </div>
          <div class="tool-group">
            <label class="label md-label">ุชุญูู</label>
            <div class="tool-options">
              <button class="btn btn-ghost btn-sm md-btn" data-action="zoom-in" type="button">ุชูุจูุฑ +</button>
              <button class="btn btn-ghost btn-sm md-btn" data-action="zoom-out" type="button">ุชุตุบูุฑ -</button>
              <button class="btn btn-ghost btn-sm md-btn" data-action="rotate-left" type="button">ุฏูุฑุงู โฒ</button>
              <button class="btn btn-ghost btn-sm md-btn" data-action="rotate-right" type="button">ุฏูุฑุงู โณ</button>
              <button class="btn btn-ghost btn-sm md-btn" data-action="flip" type="button">ููุจ ุฃููู</button>
              <button class="btn btn-ghost btn-sm md-btn" data-action="reset" type="button">ุฅุนุงุฏุฉ ุถุจุท</button>
            </div>
          </div>
          <div class="tool-group">
            <label class="label md-label">ุงูุฅุทุงุฑ</label>
            <div class="tool-options">
              <button class="btn btn-ghost btn-sm md-btn" data-frame="none" type="button">ุจุฏูู</button>
              <button class="btn btn-ghost btn-sm md-btn" data-frame="border" type="button">ุฅุทุงุฑ ุฃุจูุถ</button>
              <button class="btn btn-ghost btn-sm md-btn" data-frame="rounded" type="button">ุญูุงู ุฏุงุฆุฑูุฉ</button>
            </div>
          </div>
          <div class="image-editor-preview">
            <span class="label md-label">ุงููุนุงููุฉ</span>
            <div class="image-editor-thumb">
              <img id="imageEditorThumb" alt="ูุนุงููุฉ ูุตุบุฑุฉ" />
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer modal-actions">
        <button id="btnCancelImageEdit" class="btn btn-outline md-btn" type="button">ุฅูุบุงุก</button>
        <button id="btnApplyImageEdit" class="btn btn-primary md-btn" type="button">ุงุนุชูุงุฏ ุงูุชุนุฏูู</button>
      </div>
    </div>
  </div>

  <div id="equationEditor" class="modal hidden md-modal" aria-hidden="true">
    <div class="modal-backdrop" data-close="true"></div>
    <div class="modal-card modal-card-lg equation-editor md-modal-card" role="dialog" aria-modal="true" aria-labelledby="equationEditorTitle">
      <div class="modal-header">
        <h2 id="equationEditorTitle" class="h2">ุฅุถุงูุฉ ูุนุงุฏูุฉ</h2>
        <button id="btnCloseEquationEditor" class="btn btn-ghost btn-sm md-btn" type="button">ุฅุบูุงู</button>
      </div>
      <div class="modal-body equation-editor-body">
        <iframe id="equationEditorFrame" title="ูุญุฑุฑ ุงููุนุงุฏูุงุช" loading="lazy"></iframe>
      </div>
    </div>
  </div>

  <div id="confirmLeave" class="modal hidden md-modal" aria-hidden="true">
    <div class="modal-backdrop" data-close="true"></div>
    <div class="modal-card modal-card-sm md-modal-card" role="dialog" aria-modal="true" aria-labelledby="confirmLeaveTitle">
      <div class="modal-header">
        <h2 id="confirmLeaveTitle" class="h2">ุชุบููุฑุงุช ุบูุฑ ูุญููุธุฉ</h2>
        <button id="btnCloseLeave" class="btn btn-ghost btn-sm md-btn" type="button">ุฅุบูุงู</button>
      </div>
      <div class="modal-body">
        <p class="p">ูุฏูู ุชุบููุฑุงุช ุบูุฑ ูุญููุธุฉ. ูู ุชุฑูุฏ ุงููุชุงุจุนุฉ ุจุฏูู ุญูุธุ</p>
      </div>
      <div class="modal-footer modal-actions">
        <button id="btnConfirmLeave" class="btn btn-primary md-btn" type="button">ูุชุงุจุนุฉ ุจุฏูู ุญูุธ</button>
        <button id="btnCancelLeave" class="btn btn-outline md-btn" type="button">ุฅูุบุงุก</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/cropperjs@1.6.2/dist/cropper.min.js"></script>
  <script type="module" src="/assets/js/mng/cardEditor.js"></script>
</body>
</html>
