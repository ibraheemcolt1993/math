<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#2563eb" />
  <title>math — محرر قوالب قاعدة البيانات</title>

  <link rel="stylesheet" href="/assets/css/base.css" />
  <link rel="stylesheet" href="/assets/css/db-template-edit.css" />
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="container topbar-inner">
        <div class="brand" aria-label="math">
          <div class="brand-mark" aria-hidden="true"></div>
          <div class="brand-title">
            <b>math</b>
          </div>
        </div>

        <div class="row">
          <a class="btn btn-ghost btn-sm" href="/" aria-label="الصفحة الرئيسية">الرئيسية</a>
        </div>
      </div>
    </header>

    <main class="container section">
      <section class="stack">
        <div class="card">
          <div class="card-header">
            <div>
              <h1 class="h1">محرر db-template-edit</h1>
              <p class="p">استعرض الجداول والأعمدة وحرّر قوالب المخطط محليًا بدون أي اتصال ببوابة إدارة قاعدة البيانات.</p>
            </div>
            <span class="badge primary">Template</span>
          </div>
          <div class="card-body">
            <div class="note">
              <strong>تنبيه:</strong>
              هذه الصفحة تحفظ التعديلات محليًا في المتصفح فقط. لتطبيقها على Azure يلزم لاحقًا تشغيل ترحيلات أو سكربتات SQL عبر خط نشر.
            </div>
          </div>
        </div>
      </section>

      <section class="db-layout">
        <aside class="db-sidebar">
          <div class="card">
            <div class="card-header">
              <div>
                <h2 class="h2">الجداول</h2>
                <p class="p">ابحث أو أنشئ جدولًا جديدًا.</p>
              </div>
            </div>
            <div class="card-body">
              <label class="label" for="tableSearch">بحث</label>
              <input id="tableSearch" class="input" type="search" placeholder="ابحث باسم الجدول" />

              <div class="actions" style="margin-top: 12px;">
                <input id="newTableName" class="input" type="text" placeholder="اسم الجدول الجديد" />
                <button id="btnAddTable" class="btn btn-primary btn-sm" type="button">إضافة جدول</button>
              </div>

              <ul id="tablesList" class="tables-list" role="list"></ul>
            </div>
          </div>
        </aside>

        <section class="db-editor">
          <div class="card">
            <div class="card-header">
              <div>
                <h2 class="h2">تفاصيل الجدول</h2>
                <p class="p">حدّث اسم الجدول وأعمدته ثم احفظ القالب محليًا.</p>
              </div>
              <div class="row">
                <button id="btnSaveTemplate" class="btn btn-ghost btn-sm" type="button">حفظ محلي</button>
                <button id="btnExportJson" class="btn btn-outline btn-sm" type="button">نسخ JSON</button>
              </div>
            </div>
            <div class="card-body">
              <div id="emptyState" class="empty-state">
                <h3 class="h3">اختر جدولًا</h3>
                <p class="p">اختر جدولًا من القائمة أو أنشئ جدولًا جديدًا لبدء التعديل.</p>
              </div>

              <div id="tableEditor" class="table-editor hidden" hidden>
                <div class="field">
                  <label class="label" for="tableNameInput">اسم الجدول</label>
                  <input id="tableNameInput" class="input" type="text" />
                </div>

                <div class="columns-header">
                  <h3 class="h3">الأعمدة</h3>
                  <button id="btnAddColumn" class="btn btn-primary btn-sm" type="button">إضافة عمود</button>
                </div>

                <div id="columnsList" class="columns-list"></div>
              </div>
            </div>
          </div>

          <div class="card" style="margin-top: 16px;">
            <div class="card-header">
              <div>
                <h3 class="h3">معاينة JSON</h3>
                <p class="p">يمكنك نسخ القالب واستخدامه لاحقًا في سكربتات الترحيل.</p>
              </div>
            </div>
            <div class="card-body">
              <pre id="jsonPreview" class="json-preview"></pre>
            </div>
          </div>
        </section>
      </section>
    </main>
  </div>

  <script type="module" src="/assets/js/db-template-edit.js"></script>
</body>
</html>
